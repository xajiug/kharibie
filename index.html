<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Hamster‚Äëstyle Clicker</title>
  <style>
    /* ===== MOBILE-FIRST STYLES ===== */
    :root{
      --bg:#f6f8fb;
      --panel:#ffffff;
      --text:#0f172a;
      --muted:#6b7280;
      --line:#e5e7eb;
      --shadow:0 8px 24px rgba(2,6,23,.06);
      --r:16px;
      --accent:#2563eb;
      --danger:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
      color:var(--text);
      background:linear-gradient(180deg,#fff,var(--bg) 50%);
      -webkit-tap-highlight-color:transparent;
    }
    .container{max-width:980px;margin:0 auto;padding:12px}
    .topbar{position:sticky;top:0;z-index:5;background:transparent;padding:6px 0 10px}
    .title{font-weight:800;letter-spacing:-.02em;font-size:22px;margin:0}
    .muted{color:var(--muted);font-size:13px}
    .row{display:grid;gap:12px}
    /* Phone = 1 column; tablet+ = 2 columns */
    @media (min-width: 900px){ .row{grid-template-columns:1fr 1fr} .container{padding:20px} .title{font-size:28px} }
    .card{background:var(--panel);border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow)}
    .content{padding:14px}
    @media (min-width: 900px){ .content{padding:20px} }
    .coinbar{display:flex;align-items:center;gap:8px;font-size:34px;font-weight:900}
    @media (min-width: 900px){ .coinbar{font-size:40px} }
    .coins-label{font-size:12px;color:var(--muted)}
    .stats{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;margin-top:10px}
    @media (min-width: 520px){ .stats{grid-template-columns:repeat(4,minmax(0,1fr))} }
    .stat{background:#f8fafc;border:1px solid #eef2f7;border-radius:12px;padding:8px}
    .stat .label{font-size:10px;color:var(--muted)}
    .stat .value{font-size:16px;font-weight:700;margin-top:2px}
    .controls{display:flex;gap:8px;align-items:center;margin-top:10px}
    .badge{display:inline-block;padding:4px 8px;border-radius:999px;background:#eef2ff;color:#3730a3;font-size:11px;font-weight:700}
    .bigbtn{
      width:100%; height:46vh; min-height:220px; max-height:380px;
      border-radius:18px;border:1px solid var(--line);background:#fff;
      font-size:28px;font-weight:800;box-shadow:var(--shadow);
      display:flex;align-items:center;justify-content:center;cursor:pointer;
      touch-action:manipulation;
    }
    @media (min-width: 900px){ .bigbtn{height:300px} }
    .bigbtn:active{transform:scale(.99)}
    .floatwrap{position:relative;width:100%;height:0}
    .float{position:absolute;left:50%;transform:translateX(-50%);font-weight:800}
    .float.anim{animation:floatUp .9s ease forwards}
    .crit{color:var(--danger)}
    @keyframes floatUp{
      0%{opacity:0;transform:translate(-50%,8px)}
      50%{opacity:1;transform:translate(-50%,-10px)}
      100%{opacity:0;transform:translate(-50%,-28px)}
    }
    .shop{display:grid;grid-template-columns:1fr;gap:10px}
    @media (min-width: 400px){ .shop{grid-template-columns:repeat(2,1fr)} }
    @media (min-width: 900px){ .shop{grid-template-columns:repeat(4,1fr)} }
    .shopitem{border-radius:14px;border:1px solid var(--line);padding:12px}
    .shopitem .name{font-weight:700;font-size:15px}
    .shopitem .desc{font-size:12px;color:var(--muted);min-height:28px;margin-top:4px}
    .rowsp{display:flex;align-items:center;justify-content:space-between;margin-top:8px;gap:8px}
    .btn{
      appearance:none;border:0;background:var(--accent);color:#fff;padding:10px 12px;border-radius:12px;
      font-weight:800;cursor:pointer;box-shadow:var(--shadow);font-size:14px
    }
    .btn:active{transform:translateY(1px)}
    .btn.secondary{background:#f3f4f6;color:#111827}
    .btn[disabled]{opacity:.55;filter:grayscale(1);cursor:not-allowed}
    .tips{font-size:12px;color:var(--muted)}
    .rightTitle{font-size:18px;font-weight:800}
    .topactions{display:flex;gap:8px}
  </style>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
        <div>
          <h1 class="title">Hamster‚Äëstyle Clicker</h1>
          <div class="muted">–ö–ª–∏–∫–∞–π, –ø—Ä–æ–∫–∞—á–∏–≤–∞–π, –∫–∞–π—Ñ—É–π. –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</div>
        </div>
        <div class="topactions">
          <button id="reset" class="btn secondary">–°–±—Ä–æ—Å</button>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="card">
        <div class="content">
          <div class="coins-label">–ú–æ–Ω–µ—Ç—ã</div>
          <div class="coinbar"><span>ü™ô</span><span id="coins">0</span></div>

          <div class="stats">
            <div class="stat"><div class="label">–ó–∞ –∫–ª–∏–∫</div><div class="value" id="tpc">1</div></div>
            <div class="stat"><div class="label">–í —Å–µ–∫—É–Ω–¥—É</div><div class="value" id="aps">0</div></div>
            <div class="stat"><div class="label">–ö—Ä–∏—Ç —à–∞–Ω—Å</div><div class="value" id="crit">0%</div></div>
            <div class="stat"><div class="label">–ö—Ä–∏—Ç –º–Ω–æ–∂.</div><div class="value" id="cmult">2.0x</div></div>
          </div>

          <div class="controls">
            <button id="boost" class="btn">‚ö° –ë—É—Å—Ç x3/x2 (1000)</button>
            <span id="boostState" class="badge">–ì–æ—Ç–æ–≤</span>
          </div>

          <div style="margin-top:10px">
            <button id="tap" class="bigbtn">–ù–∞–∂–º–∏! üñêÔ∏è</button>
            <div class="floatwrap"><div id="float" class="float"></div></div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="content">
          <div class="rightTitle">–ú–∞–≥–∞–∑–∏–Ω</div>
          <div class="shop" style="margin-top:8px">
            <div class="shopitem">
              <div class="name">üî® –°–∏–ª—å–Ω—ã–π –∫–ª–∏–∫</div>
              <div class="desc">+1 –∫ —Ç–∞–ø—É</div>
              <div class="rowsp">
                <div class="muted">–¶–µ–Ω–∞: <span id="costStrong">10</span></div>
                <button id="buyStrong" class="btn">–ö—É–ø–∏—Ç—å</button>
              </div>
            </div>
            <div class="shopitem">
              <div class="name">‚è±Ô∏è –ê–≤—Ç–æ—Ç–∞–ø–ø–µ—Ä</div>
              <div class="desc">+0.5/—Å–µ–∫</div>
              <div class="rowsp">
                <div class="muted">–¶–µ–Ω–∞: <span id="costAuto">50</span></div>
                <button id="buyAuto" class="btn">–ö—É–ø–∏—Ç—å</button>
              </div>
            </div>
            <div class="shopitem">
              <div class="name">üèÜ –ö—Ä–∏—Ç. —à–∞–Ω—Å</div>
              <div class="desc">+1% (–º–∞–∫—Å 50%)</div>
              <div class="rowsp">
                <div class="muted">–¶–µ–Ω–∞: <span id="costCrit">200</span></div>
                <button id="buyCrit" class="btn">–ö—É–ø–∏—Ç—å</button>
              </div>
            </div>
            <div class="shopitem">
              <div class="name">‚ö° –ö—Ä–∏—Ç. –º–Ω–æ–∂–∏—Ç–µ–ª—å</div>
              <div class="desc">+0.1x</div>
              <div class="rowsp">
                <div class="muted">–¶–µ–Ω–∞: <span id="costCmult">500</span></div>
                <button id="buyCmult" class="btn">–ö—É–ø–∏—Ç—å</button>
              </div>
            </div>
          </div>

          <div style="margin-top:10px" class="tips">
            <ul>
              <li>–ë—É—Å—Ç –¥–∞—ë—Ç x3 –∫ –∫–ª–∏–∫—É –∏ x2 –∫ –∞–≤—Ç–æ–¥–æ—Ö–æ–¥—É –Ω–∞ 30 —Å–µ–∫, –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∞ 90 —Å–µ–∫.</li>
              <li>–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –Ω–∞—á–∏—Å–ª—è–µ—Ç –æ—Ñ–ª–∞–π–Ω‚Äë–¥–æ—Ö–æ–¥ –∞–≤—Ç–æ—Ç–∞–ø–ø–µ—Ä–∞.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const fmt = (n)=>{ if(!isFinite(n))return "0"; if(n<1000)return (Math.round(n*100)/100).toString(); const u=["K","M","B","T","Qa","Qi","Sx","Sp","Oc","No","Dc"]; let i=-1; while(n>=1000&&i<u.length-1){n/=1000;i++} return (Math.round(n*100)/100)+u[i] };
    const SKEY="hamster_clicker_web_v2";

    let state={coins:0,strongTap:0,autoTap:0,critChanceLvl:0,critMultLvl:0,lastSave:Date.now(),boostActive:false,boostLeft:0,cooldownLeft:0};
    function load(){try{const raw=localStorage.getItem(SKEY); if(raw){const s=JSON.parse(raw); Object.assign(state,s); const now=Date.now(); const secs=Math.max(0,Math.floor((now-(s.lastSave||now))/1000)); const baseAPS=(s.autoTap||0)*0.5; if(secs>0&&baseAPS>0) state.coins += secs*baseAPS; }}catch(e){}}
    function save(){ try{ state.lastSave=Date.now(); localStorage.setItem(SKEY, JSON.stringify(state)); }catch(e){} }
    load();

    const BOOST_SECONDS=30, COOLDOWN_SECONDS=90;

    function derived(){ const baseTPC=1+state.strongTap; const baseAPS=state.autoTap*0.5; const critChance=Math.min(0.5,state.critChanceLvl*0.01); const critMult=2+state.critMultLvl*0.1; const tpc=state.boostActive?baseTPC*3:baseTPC; const aps=state.boostActive?baseAPS*2:baseAPS; return {baseTPC,baseAPS,critChance,critMult,tpc,aps}; }
    function costs(){ return { strong:Math.round(10*Math.pow(1.15,state.strongTap)), auto:Math.round(50*Math.pow(1.15,state.autoTap)), crit:Math.round(200*Math.pow(1.2,state.critChanceLvl)), cmult:Math.round(500*Math.pow(1.25,state.critMultLvl)), boost:1000 }; }

    const coinsEl=document.getElementById("coins");
    const tpcEl=document.getElementById("tpc");
    const apsEl=document.getElementById("aps");
    const critEl=document.getElementById("crit");
    const cmultEl=document.getElementById("cmult");
    const floatEl=document.getElementById("float");
    const boostBtn=document.getElementById("boost");
    const boostState=document.getElementById("boostState");
    const costStrong=document.getElementById("costStrong");
    const costAuto=document.getElementById("costAuto");
    const costCrit=document.getElementById("costCrit");
    const costCmult=document.getElementById("costCmult");
    const buyStrong=document.getElementById("buyStrong");
    const buyAuto=document.getElementById("buyAuto");
    const buyCrit=document.getElementById("buyCrit");
    const buyCmult=document.getElementById("buyCmult");

    function refreshUI(){
      const d=derived();
      coinsEl.textContent=fmt(state.coins);
      tpcEl.textContent=fmt(d.tpc);
      apsEl.textContent=fmt(d.aps);
      critEl.textContent=Math.round(d.critChance*100)+"%";
      cmultEl.textContent=d.critMult.toFixed(1)+"x";
      const c=costs();
      costStrong.textContent=fmt(c.strong);
      costAuto.textContent=fmt(c.auto);
      costCrit.textContent=fmt(c.crit);
      costCmult.textContent=fmt(c.cmult);
      buyStrong.disabled=state.coins<c.strong;
      buyAuto.disabled=state.coins<c.auto;
      buyCrit.disabled=state.coins<c.crit || d.critChance>=0.5;
      buyCmult.disabled=state.coins<c.cmult;
      if(state.boostActive){ boostBtn.disabled=true; boostBtn.textContent="‚ö° –ë—É—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω"; boostState.textContent=state.boostLeft+"s"; }
      else if(state.cooldownLeft>0){ boostBtn.disabled=true; boostBtn.textContent="‚ö° –ö–î"; boostState.textContent=state.cooldownLeft+"s"; }
      else { boostBtn.disabled=state.coins<c.boost; boostBtn.textContent="‚ö° –ë—É—Å—Ç x3/x2 (1000)"; boostState.textContent="–ì–æ—Ç–æ–≤"; }
    }
    function addFloat(text,isCrit=false){ floatEl.textContent=text; floatEl.className="float anim"+(isCrit?" crit":""); void floatEl.offsetWidth; setTimeout(()=>{ floatEl.className="float"; },900); }

    document.getElementById("tap").addEventListener("click", ()=>{
      const d=derived();
      const isCrit=Math.random()<d.critChance;
      const gain=isCrit ? d.tpc*d.critMult : d.tpc;
      state.coins+=gain;
      addFloat("+"+fmt(gain)+(isCrit?" CRIT!":""), isCrit);
      refreshUI(); save();
    });

    boostBtn.addEventListener("click", ()=>{
      const c=costs();
      if(state.coins<c.boost || state.boostActive || state.cooldownLeft>0) return;
      state.coins-=c.boost; state.boostActive=true; state.boostLeft=BOOST_SECONDS; state.cooldownLeft=COOLDOWN_SECONDS;
      refreshUI(); save();
    });

    buyStrong.addEventListener("click", ()=>{ const c=costs().strong; if(state.coins<c) return; state.coins-=c; state.strongTap+=1; refreshUI(); save(); });
    buyAuto.addEventListener("click", ()=>{ const c=costs().auto; if(state.coins<c) return; state.coins-=c; state.autoTap+=1; refreshUI(); save(); });
    buyCrit.addEventListener("click", ()=>{ const c=costs().crit; const d=derived(); if(state.coins<c || d.critChance>=0.5) return; state.coins-=c; state.critChanceLvl+=1; refreshUI(); save(); });
    buyCmult.addEventListener("click", ()=>{ const c=costs().cmult; if(state.coins<c) return; state.coins-=c; state.critMultLvl+=1; refreshUI(); save(); });

    document.getElementById("reset").addEventListener("click", ()=>{
      if(!confirm("–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å?")) return;
      localStorage.removeItem(SKEY);
      state={coins:0,strongTap:0,autoTap:0,critChanceLvl:0,critMultLvl:0,lastSave:Date.now(),boostActive:false,boostLeft:0,cooldownLeft:0};
      refreshUI();
    });

    setInterval(()=>{
      const d=derived();
      state.coins+=d.aps;
      if(state.cooldownLeft>0) state.cooldownLeft-=1;
      if(state.boostActive){ state.boostLeft-=1; if(state.boostLeft<=0) state.boostActive=false; }
      refreshUI(); save();
    },1000);

    refreshUI();
  </script>
</body>
</html>
